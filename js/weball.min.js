

var hand;
var ballId = 2;
var playground = $("#playground");
var homeRight = $("#homeRight");
var shooterRight = $("#shooterRight");
var homeLeft = $("#homeLeft");
var shooterLeft = $("#shooterLeft");
var lineLeft = $("#lineLeft");
var lineRight = $("#lineRight");


function turnHand (activeHand) {
  hand = activeHand;
  shooter = (hand == 'left') ? homeRight : homeLeft;
  homeLeft.animate({opacity: 1}, 1);
  homeRight.animate({opacity: 1}, 1);
  shooter.animate({opacity: 0.3}, 5);
  // console.log(activeHand+' Turn '+shooter);
  ballId++;
};
turnHand ('right');

$(".shooter").click(function() {
  let shooterId = '#' + $(this).attr("id");
  if (hand == 'right') {
    ballColor = 'red';
    nextHand = 'left';
    handShooter = '#shooterRight';
    line = lineLeft;
  } else {
    ballColor = 'blue';
    nextHand = 'right';
    handShooter = '#shooterLeft';
    line = lineRight;
  }

  if (shooterId == handShooter) {

    var shooterBall = $(shooterId+' .circle').offset();
    var playgroundMax = playground.height();
    var placeX = 5;

    var newball = '<figure id="ball-'+ballId+'" class="circle '+ballColor+'"></figure>'
    line.append(newball);
    ball = $("#ball-"+ballId);
    ball.offset(shooterBall);
    ball.animate({opacity: 0.60}, 50);

    var options = {};
    options[nextHand] = placeX;
    options[hand] = -35;
    ball.animate(options, 350);

    // var options = {};
    // options['left'] = "+=100";
    // ball.animate(options, 350);

    ball.animate({opacity: 1}, 30);
    turnHand (nextHand);

    let a = "#ball-" + ballId;
    let b = "#ball-" + (ballId-2);


    console.log(a);

  } else {
    console.log(handShooter+' != ' + shooterId);
  }
});






$(".home").click(function() {
  let home = '#' + $(this).attr("id");
  let shooter = $(home + ">.shooter");
  shooter.animate({opacity: 0.4}, 10);
  var playgroundMax = playground.height() - 78;
  var move = event.pageY - playground.offset().top-38;
  move = (move > playgroundMax) ? (playgroundMax) : move;
  move = (move < 0) ? (move + 38) : move;
  shooter.animate({top: move,opacity: 1}, 130);
  // console.log('Set '+ home +': ' + move);
});
